<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Subscription Confirmed - Taaza</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;700;900&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <style>
        body {
            font-family: 'Work Sans', 'Noto Sans', sans-serif;
            background-color: #0C2D57;
            color: #fff;
            min-height: 100vh;
        }

        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .success-icon {
            width: 96px;
            height: 96px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .btn-glow {
            box-shadow: 0 4px 15px 0 rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
        }

        .btn-glow:hover {
            box-shadow: 0 6px 20px 0 rgba(255, 215, 0, 0.5);
            transform: translateY(-2px);
        }
        
        /* Enhanced responsive design */
        @media (max-width: 374px) {
            .p-6 {
                padding: 1rem;
            }
            
            .text-3xl {
                font-size: 1.5rem;
            }
            
            .text-lg {
                font-size: 1rem;
            }
            
            .max-w-md {
                max-width: 100%;
            }
        }
        
        @media (min-width: 375px) and (max-width: 639px) {
            .p-6 {
                padding: 1.25rem;
            }
        }
        
        @media (min-width: 768px) {
            .p-6 {
                padding: 2rem;
            }
            
            .max-w-md {
                max-width: 32rem;
            }
        }
        
        /* Enhanced button styling */
        .btn-primary {
            min-height: 48px;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .btn-secondary {
            min-height: 48px;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .btn-primary:active,
        .btn-secondary:active {
            transform: scale(0.98);
        }
        
        /* Focus indicators */
        .btn-primary:focus-visible,
        .btn-secondary:focus-visible {
            outline: 2px solid #FFD700;
            outline-offset: 2px;
        }
        
        /* Safe area handling */
        @supports (padding: max(0px)) {
            .p-6 {
                padding-left: max(1.5rem, env(safe-area-inset-left));
                padding-right: max(1.5rem, env(safe-area-inset-right));
                padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
            }
        }
        
        /* Landscape optimizations */
        @media (orientation: landscape) and (max-height: 500px) {
            .h-screen {
                min-height: 100vh;
            }
            
            .flex-grow {
                flex-grow: 0;
            }
            
            .justify-center {
                justify-content: flex-start;
                padding-top: 2rem;
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">
    <div class="flex flex-col h-screen justify-between p-6 relative z-10 font-display fade-in">
        <div class="flex-grow flex flex-col items-center justify-center text-center">
            <div class="mb-8">
                <svg class="w-24 h-24 text-[#FFD700]" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h1 id="main-title" class="text-3xl font-bold text-white mb-4">Subscription Confirmed!</h1>
            <p id="main-message" class="text-lg font-bold text-white mb-2">Your milk subscription has been successfully created.</p>
            <p id="subscription-plan" class="text-[#FFD700] mb-2 font-medium">Loading...</p>
            <p class="text-[#d1d5db]">Your first delivery will start from <span id="start-date" class="font-bold text-white">tomorrow</span>.</p>
            <p class="text-[#d1d5db] mt-1">You can manage your subscription anytime from your account.</p>

            <div class="mt-8 p-4 bg-[#0C2D57] border border-[#FFD700] rounded-lg max-w-md">
                <h2 class="text-xl font-bold text-[#FFD700] mb-2">What happens next?</h2>
                <ul class="text-[#d1d5db] text-left space-y-2">
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-[#FFD700] mt-0.5 mr-2 flex-shrink-0" fill="currentColor"
                            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span>Your first delivery will be on <span id="first-delivery-date">tomorrow</span></span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-[#FFD700] mt-0.5 mr-2 flex-shrink-0" fill="currentColor"
                            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span>You'll receive notifications before each delivery</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-[#FFD700] mt-0.5 mr-2 flex-shrink-0" fill="currentColor"
                            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span>You can skip, pause, or modify your subscription anytime</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="w-full mt-8">
            <button onclick="goToMilkPlan()"
                class="btn-primary w-full bg-[#FFD700] text-[#0C2D57] shadow-lg hover:bg-yellow-500 btn-glow" aria-label="View your milk subscription plan">
                View My Milk Plan
            </button>
            <button onclick="returnToHome()"
                class="btn-secondary w-full mt-4 bg-transparent border border-[#FFD700] text-[#FFD700] hover:bg-[#FFD700] hover:text-[#0C2D57]" aria-label="Return to homepage">
                Return to Home
            </button>
        </div>
    </div>

    <script>
        function goToMilkPlan() {
            window.location.href = 'Your Milk Plan.html';
        }

        function returnToHome() {
            window.location.href = '../pages/7-Homepage.html';
        }

        // Get formatted date
        function getFormattedDate(daysFromNow = 0) {
            const date = new Date();
            date.setDate(date.getDate() + daysFromNow);
            return date.toLocaleDateString('en-IN', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        // Helper function to get day names
        function getDayNames(days) {
            const dayMap = {
                'monday': 'Mon', 'tuesday': 'Tue', 'wednesday': 'Wed',
                'thursday': 'Thu', 'friday': 'Fri', 'saturday': 'Sat', 'sunday': 'Sun'
            };
            return days.map(day => dayMap[day]).join(', ');
        }

        // Load subscription data
        function loadSubscriptionData() {
            const isUpdate = localStorage.getItem('subscriptionUpdate') === 'true';
            const morningEnabled = localStorage.getItem('morningDelivery') === 'true';
            const eveningEnabled = localStorage.getItem('eveningDelivery') === 'true';
            
            // Update title and message based on action
            if (isUpdate) {
                document.getElementById('main-title').textContent = 'Subscription Updated!';
                document.getElementById('main-message').textContent = 'Your milk subscription has been successfully updated.';
            }
            
            let planText = '';
            
            if (morningEnabled && eveningEnabled) {
                const morningQty = localStorage.getItem('morningQuantity') || '0.5';
                const morningType = localStorage.getItem('morningMilkType') || 'buffalo';
                const morningFreq = localStorage.getItem('morningFrequency') || 'daily';
                const morningDays = JSON.parse(localStorage.getItem('morningDays') || '[]');
                
                const eveningQty = localStorage.getItem('eveningQuantity') || '0.5';
                const eveningType = localStorage.getItem('eveningMilkType') || 'cow';
                const eveningFreq = localStorage.getItem('eveningFrequency') || 'alternate';
                const eveningDays = JSON.parse(localStorage.getItem('eveningDays') || '[]');
                
                const morningFreqText = morningFreq === 'daily' ? 'Daily' : getDayNames(morningDays);
                const eveningFreqText = eveningFreq === 'daily' ? 'Daily' : getDayNames(eveningDays);
                
                planText = `Morning: ${morningQty}L ${morningType === 'buffalo' ? 'Buffalo' : 'Cow'} (${morningFreqText}) + Evening: ${eveningQty}L ${eveningType === 'buffalo' ? 'Buffalo' : 'Cow'} (${eveningFreqText})`;
            } else if (morningEnabled) {
                const qty = localStorage.getItem('morningQuantity') || '0.5';
                const type = localStorage.getItem('morningMilkType') || 'buffalo';
                const freq = localStorage.getItem('morningFrequency') || 'daily';
                const days = JSON.parse(localStorage.getItem('morningDays') || '[]');
                const timeSlot = localStorage.getItem('morningTimeSlot') || '7:00-7:30';
                
                const freqText = freq === 'daily' ? 'Daily' : getDayNames(days);
                planText = `${qty}L ${type === 'buffalo' ? 'Buffalo' : 'Cow'} Milk - ${freqText} (Morning ${timeSlot})`;
            } else if (eveningEnabled) {
                const qty = localStorage.getItem('eveningQuantity') || '0.5';
                const type = localStorage.getItem('eveningMilkType') || 'cow';
                const freq = localStorage.getItem('eveningFrequency') || 'alternate';
                const days = JSON.parse(localStorage.getItem('eveningDays') || '[]');
                const timeSlot = localStorage.getItem('eveningTimeSlot') || '6:00-6:30';
                
                const freqText = freq === 'daily' ? 'Daily' : getDayNames(days);
                planText = `${qty}L ${type === 'buffalo' ? 'Buffalo' : 'Cow'} Milk - ${freqText} (Evening ${timeSlot})`;
            } else {
                planText = 'No active subscription';
            }
            
            document.getElementById('subscription-plan').textContent = planText;
            document.getElementById('start-date').textContent = getFormattedDate(1);
            document.getElementById('first-delivery-date').textContent = getFormattedDate(1);
            
            // Clear the update flag
            localStorage.removeItem('subscriptionUpdate');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            loadSubscriptionData();
            
            // Add staggered animation to elements
            const elements = document.querySelectorAll('.fade-in > *');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.2}s`;
            });
        });
    </script>
</body>

</html>